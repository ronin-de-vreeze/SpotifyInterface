<html>

<head>

</head>

<body>
    <script>
        load();

        async function load() { 
            try {
                const res = await fetch('/tracks', {method: 'POST'});
                if (!res.ok) throw new Error(`Fetch /tracks failed: ${res.status} ${res.statusText}`);
                const tracks = await res.json();

                const container = document.createElement('div');
                container.innerHTML = Array.isArray(tracks) && tracks.length
                    ? tracks.map(t => `<div class="track"><strong>${esc(t.title || t.name || 'Untitled')}</strong>${t.artist || t.artists ? ' â€” ' + esc(t.artist || (Array.isArray(t.artists) ? t.artists.join(', ') : '')) : ''}</div>`).join('')
                    : '<div>No tracks</div>';

                document.body.appendChild(container);
            } catch (err) {
                console.error(err);
            }
        }
    </script>
</body>

</html>